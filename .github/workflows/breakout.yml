name: Generate Game-Like Contribution Graph

on:
  schedule:
    - cron: "5 18 * * *"
  workflow_dispatch:

jobs:
  generate-graph:
    permissions:
      contents: write
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
        
      - name: Generate Contribution Grid
        uses: Platane/snk@v3
        with:
          github_user_name: datSpr
          outputs: |
            images/game-grid.svg?color=green&animation=none
          
      - name: Add Game Elements to SVG
        run: |
          # Thêm ball, paddle vào contribution graph
          python add_game_elements.py images/game-grid.svg
          
      - name: Commit and push
        run: |
          git config user.name "github-actions[bot]"
          git config user.email "github-actions[bot]@users.noreply.github.com"
          git add images/
          git commit -m "chore: update game-style contribution graph" || exit 0
          git push
